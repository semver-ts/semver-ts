<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Introduction - Semantic Versioning for TypeScript Types</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="styles/open-in.css">

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="index.html" class="active">Introduction</a></li><li class="chapter-item expanded affix "><li class="part-title">Background and Basics</li><li class="chapter-item expanded "><a href="1-background.html"><strong aria-hidden="true">1.</strong> TypeScript’s Versioning Policy</a></li><li class="chapter-item expanded "><a href="2-conformance.html"><strong aria-hidden="true">2.</strong> Conformance</a></li><li class="chapter-item expanded "><a href="3-practical-guidance.html"><strong aria-hidden="true">3.</strong> Practical Guidance</a></li><li class="chapter-item expanded affix "><li class="part-title">Formal Specification</li><li class="chapter-item expanded "><a href="formal-spec/index.html"><strong aria-hidden="true">4.</strong> Overview</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="formal-spec/1-definitions.html"><strong aria-hidden="true">4.1.</strong> Definitions</a></li><li class="chapter-item expanded "><a href="formal-spec/2-breaking-changes.html"><strong aria-hidden="true">4.2.</strong> Breaking Changes</a></li><li class="chapter-item expanded "><a href="formal-spec/3-non-breaking-changes.html"><strong aria-hidden="true">4.3.</strong> Non-Breaking Changes</a></li><li class="chapter-item expanded "><a href="formal-spec/4-bug-fixes.html"><strong aria-hidden="true">4.4.</strong> Bug Fixes</a></li><li class="chapter-item expanded "><a href="formal-spec/5-compiler-considerations.html"><strong aria-hidden="true">4.5.</strong> Compiler Considerations</a></li></ol></li><li class="chapter-item expanded "><li class="part-title">Appendices</li><li class="chapter-item expanded "><a href="appendices/index.html"><strong aria-hidden="true">5.</strong> Overview</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="appendices/a-adopters.html"><strong aria-hidden="true">5.1.</strong> Adopters</a></li><li class="chapter-item expanded "><a href="appendices/b-tooling.html"><strong aria-hidden="true">5.2.</strong> Tooling</a></li><li class="chapter-item expanded "><a href="appendices/c-variance-in-typescript.html"><strong aria-hidden="true">5.3.</strong> Variance in TypeScript</a></li><li class="chapter-item expanded "><a href="appendices/d-history.html"><strong aria-hidden="true">5.4.</strong> History</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Semantic Versioning for TypeScript Types</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/semver-ts/semver-ts" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="introduction"><a class="header" href="#introduction">Introduction</a></h1>
<p>This document defines a specification of <a href="https://semver.org">Semantic Versioning</a> for managing changes to TypeScript types, including when the TypeScript compiler makes breaking changes in its type-checking and type emit across a “minor” release.</p>
<p>Informally, the big idea is the <em>no new “red squiggles” rule</em>:</p>
<blockquote>
<p>If you are using a library which follows the policy outlined in this specification, you should not normally get new TypeScript type errors (“red squiggles” in your editor) when upgrading the library to a new minor version.</p>
</blockquote>
<p>Although this an easy-enough intuition to <em>describe</em>, implementing it correctly is tricky: thus this specification.</p>
<h2 id="status"><a class="header" href="#status">Status</a></h2>
<ul>
<li>Version 1.0.0-beta.3</li>
<li>Last updated on November 26, 2023</li>
</ul>
<h2 id="contents"><a class="header" href="#contents">Contents</a></h2>
<ul>
<li><a href="#reading-this-spec">Reading this spec</a></li>
<li><a href="#why">Why?</a></li>
<li><a href="#summary">Summary</a>
<ul>
<li><a href="#for-package-consumers">For package consumers</a></li>
<li><a href="#for-package-authors">For package authors</a></li>
</ul>
</li>
<li><a href="#notes">Notes</a></li>
</ul>
<h2 id="reading-this-spec"><a class="header" href="#reading-this-spec">Reading this spec</a></h2>
<p>There are three levels of detail in this spec, broken out so you can get as much detail as you like—or just get the gist!</p>
<ol>
<li>
<p><strong>This very page</strong> covers all the big ideas. If you are an app author, this is probably enough info to get the big idea.</p>
</li>
<li>
<p>The <strong>Background and Basics</strong> section dives a bit deeper. For many library authors, this section will give you enough detail to get by.</p>
</li>
<li>
<p>The <strong>Formal Specification</strong> section goes into every bit of nitty-gritty detail. If you are maintaining a core piece of JavaScript infrastructure like a framework or a high-usage library, you should take the time to actually work through this.</p>
</li>
</ol>
<p>For the really brave and nerdy, <strong>Appendix C</strong> gets into the most arcane bits of how TypeScript and SemVer interact!</p>
<h2 id="why"><a class="header" href="#why">Why?</a></h2>
<p>For TypeScript packages be good citizens of the broader, semantically-versioned JavaScript ecosystem, package authors need a useful definition of SemVer for TypeScript’s type system.</p>
<p>This is somewhat more complicated than in other languages, even those other statically-typed languages with language-level SemVer guarantees (such as <a href="https://rust-lang.github.io/rfcs/1122-language-semver.html">Rust</a> and Elm), because TypeScript has an unusually flexible type system. In particular, its <a href="https://en.wikipedia.org/wiki/Structural_type_system">structural type system</a> means many more kinds of both breaking and non-breaking changes are possible than in languages with a <a href="https://en.wikipedia.org/wiki/Nominal_type_system">nominal type system</a>.<sup class="footnote-reference"><a href="#other-structural-types">1</a></sup> Accordingly, this document proposes a definition of SemVer which accounts for the extra flexibility afforded by these features.</p>
<p>Furthermore, unlike the rest of the JavaScript ecosystem, the TypeScript compiler explicitly <em>rejects</em> SemVer. TypeScript's core team argues that <em>every</em> change to a compiler is a breaking change, and that SemVer is therefore meaningless for TypeScript. We do not agree with this characterization, but take the TypeScript team's position as a given for the purposes of this document. Accordingly, every TypeScript non-patch release may be a breaking change, and &quot;major&quot; numbers for releases signify nothing beyond having reached <code>x.9</code> in the previous cycle.</p>
<p>This means that defining SemVer for TypeScript Types requires that we specify a definition of Semantic Versioning which can absorb breaking changes in the TypeScript compiler as well as intentional changes by package authors. As such, it also requires clearly defined TypeScript compiler version support policies.</p>
<h2 id="summary"><a class="header" href="#summary">Summary</a></h2>
<p>This section is a non-normative short summary for easy digestion. See the <a href="./formal-spec/index.html"><strong>Formal Specification</strong></a> for normative text.</p>
<h3 id="for-package-consumers"><a class="header" href="#for-package-consumers">For package consumers</a></h3>
<p>Things a package may do in a non-breaking way:</p>
<ul>
<li>widen what it accepts from you</li>
<li>narrow what it provides to you</li>
<li>add new exports</li>
</ul>
<p>Things which constitute breaking changes in a package:</p>
<ul>
<li>narrowing what it accepts from you</li>
<li>widening what it provides to you</li>
<li>removing exports</li>
</ul>
<p>Note that this summary elides <em>many</em> important details, and those details may surprise you! In particular &quot;what it accepts&quot; and &quot;what it provides&quot; have considerable depth and nuance: they include interfaces or types you can construct, function arguments, class field mutability, and more.</p>
<h3 id="for-package-authors"><a class="header" href="#for-package-authors">For package authors</a></h3>
<ul>
<li>
<p>Public published types are part of the SemVer contract of a package, and must be versioned accordingly, per the specification above.</p>
</li>
<li>
<p>Adding a new TypeScript version to the support matrix <em>may</em> cause breaking changes. When it does not, adding it is a normal minor release. When it <em>does</em> cause a breaking change, the package must either mitigate that breakage (so consumers are not broken) <em>or</em> the package must release a major version.</p>
</li>
<li>
<p>Removing a TypeScript version from the support matrix is a breaking change, except when it falls out of the supported version range under the “rolling support windows” policy.</p>
</li>
<li>
<p>There are two recommended support policies for TypeScript compiler versions: <em>simple majors</em> and <em>rolling window</em>.</p>
<ul>
<li>
<p>In <em>simple majors</em>, dropping support for a previously supported compiler version requires a breaking change.</p>
</li>
<li>
<p>In <em>rolling window</em>, a package may declare a range of supported versions which moves over time, similar to supporting evergreen browsers.</p>
<p>Packages using the “rolling window” policy should normally support all TypeScript versions released during the current ‘LTS’ of other core packages/runtimes/etc. they support, and drop support for them only when they drop support for that ‘LTS’, to minimize the number of major versions in the ecosystem.</p>
</li>
</ul>
</li>
<li>
<p>Both the currently-supported compiler versions and the compiler version support policy must be documented.</p>
</li>
<li>
<p>Packages must be authored with the following compiler options:</p>
<ul>
<li><code>strict: true</code></li>
<li><code>noUncheckedIndexedAccess: true</code></li>
<li><code>exactOptionalPropertyTypes: true</code></li>
</ul>
</li>
<li>
<p>Libraries should generally be authored with the following compiler options:</p>
<ul>
<li><code>esModuleInterop: false</code></li>
<li><code>allowSyntheticDefaultImports: false</code></li>
</ul>
</li>
</ul>
<h2 id="notes"><a class="header" href="#notes">Notes</a></h2>
<div class="footnote-definition" id="other-structural-types"><sup class="footnote-definition-label">1</sup>
<p>Many languages include structural typing in certain contexts, including Swift's protocols, Elm's record types, and row-polymorphic types in OCaml, PureScript, etc. However, of these only Elm provides language-level guidance or tooling, and at the time of authoring there is no public specification of its behavior. Its current algorithm is <a href="https://github.com/elm/compiler/blob/770071accf791e8171440709effe71e78a9ab37c/builder/src/Deps/Diff.hs#L128-L136">implementations-specified</a> and roughly checks for addition or removal of fields.</p>
</div>
<footer id="open-on-gh">Found a bug? <a href="https://github.com/semver-ts/semver-ts/edit/main/src/index.md">Edit this file on GitHub.</a></footer>
                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->

                            <a rel="next prefetch" href="1-background.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

                    <a rel="next prefetch" href="1-background.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
